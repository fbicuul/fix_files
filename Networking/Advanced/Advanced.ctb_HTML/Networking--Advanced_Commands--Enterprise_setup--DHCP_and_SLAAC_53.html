<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>DHCP and SLAAC</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>DHCP and SLAAC</h1><br/><p><strong><span style="color:#071ba3;">Dynamic Host Configuration Protocol v4 (DHCPv4)</span></strong><strong> </strong>assigns IPv4 addresses and other network configuration information dynamically. </p><p></p><p></p><p>When the client boots (or wants to join a network), it begins a four-step process to obtain a lease:</p><p>1. Discover message <span style="color:#663e0e;">(DHCPDISCOVER)</span></p><p>2. Offer message <span style="color:#663e0e;">(DHCPOFFER)</span></p><p>3. Request message <span style="color:#663e0e;">(DHCPREQUEST)</span></p><p>4. Acknowledgment message <span style="color:#663e0e;">(DHCPACK)</span></p><p></p><p><img src="images/53-1.png" alt="images/53-1.png" /></p><p></p><p>Prior to lease expiration, the client begins a two-step process to  renew the lease with the DHCPv4 server, as shown in the figure:</p><p></p><p></p><p></p><p><strong><span style="color:#060f94;">1. DHCP Request (DHCPREQUEST)</span></strong></p><p>Before  the lease expires, the client sends a DHCPREQUEST message directly to  the DHCPv4 server that originally offered the IPv4 address. If a DHCPACK  is not received within a specified amount of time, the client  broadcasts another DHCPREQUEST so that one of the other DHCPv4 servers  can extend the lease.</p><p><strong><span style="color:#060f94;">2. DHCP Acknowledgment (DHCPACK)</span></strong></p><p>On receiving the DHCPREQUEST message, the server verifies the lease information by returning a DHCPACK.</p><p></p><p></p><p></p><p></p><p><img src="images/53-2.png" alt="images/53-2.png" /></p><p></p><p></p><p></p><p></p><p></p><p><strong><span style="color:#060f94;">CONFIGURING DHCPv4 SERVER</span></strong> </p><p></p><p><span style="color:#f66151;">Router (config)#</span> ip dhcp excluded-address <span style="color:#237522;">192.168.10.1	</span> 192.168.10.20</p><p><span style="color:#663e0e;text-decoration:line-through;">Router (config)# ip dhcp excluded-address 192.168.10.254</span></p><p><span style="color:#f66151;">Router (config)#</span> ip dhcp   pool  WLAN-hosts</p><p><span style="color:#f66151;">Router (config)#</span> network 192.168.10.0  255.255.255.0</p><p><span style="color:#f66151;">Router (config)#</span> default-router  192.168.10.1</p><p><span style="color:#f66151;">Router (config)#</span> dns-server  198.51.100.163</p><p><span style="color:#f66151;">Router (config)#</span> exit</p><p></p><p></p><p></p><p></p><p><strong><span style="color:#060f94;">MAKING THIS ROUTER A DHCP CLIENT</span></strong></p><p><span style="color:#f66151;">Router (config)#</span> int  g0/0/1</p><p><span style="color:#f66151;">Router (config-if)#</span> ip address dhcp</p><p><span style="color:#f66151;">Router (config-if)#</span> no shutdown</p><p></p><p></p><p></p><p></p><p><strong><span style="color:#060f94;">DHCPv4 Relay</span></strong></p><p><span style="color:#77767b;">C:\Users\Student&gt; ipconfig /release</span><span style="color:#57e389;">						on the CMD Line</span><span style="color:#77767b;"></span></p><p><span style="color:#77767b;">C:\Users\Student&gt; ipconfig /renew</span><span style="color:#57e389;">							on the CMD Line</span></p><p><span style="color:#f66151;">R1(config)#</span> interface g0/0/0</p><p><span style="color:#f66151;">R1(config-if)#</span> ip helper-address 192.168.11.6</p><p><span style="color:#f66151;">R1(config-if)# </span>end</p><p><span style="color:#f66151;">R1#</span></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p><strong><span style="color:#071ba3;">Dynamic Host Configuration Protocol v4 (DHCPv6)</span></strong><strong> </strong></p><p><strong><span style="color:#060f94;">STATELESS DHCPv6 SERVER</span></strong></p><p></p><p>R1(config)# ipv6 unicast-routing</p><p>R1(config)#</p><p>R1(config)# ipv6 dhcp pool IPV6-STATELESS</p><p>R1(config-dhcpv6)# dns-server 2001:db8:acad:1::254</p><p>R1(config-dhcpv6)# domain-name example.com</p><p>R1(config-dhcpv6)# exit</p><p>R1(config)#</p><p>R1(config)# interface G0/0/1</p><p>R1(config-if)# description Link to LAN</p><p>R1(config-if)# ipv6 address fe80::1 link-local</p><p>R1(config-if)# ipv6 address 2001:db8:acad:1::1/64</p><p>R1(config-if)# ipv6 nd other-config-flag</p><p>R1(config-if)# ipv6 dhcp server IPV6-STATELESS</p><p>R1(config-if)# no shut</p><p>R1(config-if)# end</p><p>R1#</p><p></p><p></p><p>C:\PC1&gt; ipconfig /all</p><p></p><p></p><p></p><p><strong><span style="color:#060f94;">STATELESS CLIENT</span></strong></p><p>R1(config)# ipv6 unicast-routing</p><p>R1(config)#</p><p>R3(config)# interface g0/0/1</p><p>R3(config-if)# ipv6 enable</p><p>R3(config-if)# </p><p>R3(config-if)# ipv6 address autoconfig</p><p>R3(config-if)# end</p><p>R3#</p><p></p><p>R3# show ipv6 interface brief</p><p>R3# show ipv6 dhcp interface g0/0/1</p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p><strong><span style="color:#060f94;">STATEFUL SERVER</span></strong></p><p></p><p>R1(config)# ipv6 unicast-routing</p><p>R1(config)#</p><p>R1(config)# ipv6 dhcp pool IPV6-STATEFUL</p><p>R1(config-dhcpv6)# address prefix 2001:db8:acad:1::/64</p><p>R1(config-dhcpv6)# dns-server 2001:4860:4860::8888</p><p>R1(config-dhcpv6)# domain-name example.com</p><p>R1(config-dhcpv6)#</p><p>R1(config)# interface GigabitEthernet0/0/1</p><p>R1(config-if)# description Link to LAN</p><p>R1(config-if)# ipv6 address fe80::1 link-local</p><p>R1(config-if)# ipv6 address 2001:db8:acad:1::1/64</p><p>R1(config-if)# ipv6 nd managed-config-flag</p><p>R1(config-if)# ipv6 nd prefix default no-autoconfig</p><p>R1(config-if)# ipv6 dhcp server IPV6-STATEFUL</p><p>R1(config-if)# no shut</p><p>R1(config-if)# end</p><p>R1#</p><p></p><p></p><p>C:\PC1&gt; ipconfig /all</p><p></p><p></p><p></p><p></p><p></p><p><strong><span style="color:#060f94;">STATEFUL CLIENT</span></strong></p><p>R1(config)# ipv6 unicast-routing</p><p>R1(config)#</p><p>R3(config)# interface g0/0/1</p><p>R3(config-if)# ipv6 enable</p><p>R3(config-if)# </p><p>R3(config-if)# ipv6 address dhcp</p><p>R3(config-if)# end</p><p>R3#</p><p></p><p>R3# show ipv6 interface brief</p><p>R3# show ipv6 dhcp interface g0/0/1</p><p></p><p></p><p></p><p></p><p><strong><span style="color:#060f94;">CONFIGURE A DHCPv6 Relay Agent</span></strong></p><p></p><p>R1(config)# interface gigabitethernet 0/0/1</p><p>R1(config-if)# ipv6 dhcp relay destination 2001:db8:acad:1::2 G0/0/0</p><p>R1(config-if)# exit</p><p>R1(config)#</p><p></p><p></p><p></p></div>
</body>
</html>
